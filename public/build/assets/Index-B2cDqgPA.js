import{r as de,g as he,j as e,a as E,m as I,$ as me,S as ge}from"./app-a17V35Ex.js";import{T as J,I as L}from"./TextInput-CbkplM6V.js";import{I as z}from"./InputLabel-DUvnhS6U.js";import{M as K}from"./Modal-hEi01PnJ.js";import{B as T}from"./Button-Cyp5wEiH.js";import{A as fe}from"./AdminLayout-CAvGt-wk.js";import{T as pe,a as xe,b as B,E as ve,D as je}from"./TableData-BLUbpIal.js";import"./transition-HQgnNRUc.js";import"./index-Dca8f_Q-.js";import"./Loader-fKDPiDcW.js";import"./SideBarLink-DHPaqsYh.js";import"./CollabsableDiv-xu1Z0SUw.js";import"./CollabsableLinks-C6wOpsms.js";var Q={exports:{}},se;function be(){return se||(se=1,function(N){N.exports=function(x){var m={};function g(n){if(m[n])return m[n].exports;var d=m[n]={exports:{},id:n,loaded:!1};return x[n].call(d.exports,d,d.exports,g),d.loaded=!0,d.exports}return g.m=x,g.c=m,g.p="",g(0)}([function(x,m,g){x.exports=g(1)},function(x,m,g){Object.defineProperty(m,"__esModule",{value:!0});function n(u){return u&&u.__esModule?u:{default:u}}var d=g(2),c=n(d);m.default=c.default,x.exports=m.default},function(x,m,g){Object.defineProperty(m,"__esModule",{value:!0});var n=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};m.default=f;function d(t){return t&&t.__esModule?t:{default:t}}function c(t,o){var r={};for(var a in t)o.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r}var u=g(3),C=g(4),y=g(5),j=d(y);function f(t){var o=t.activeClassName,r=o===void 0?"":o,a=t.activeIndex,v=a===void 0?-1:a,i=t.activeStyle,b=t.autoEscape,h=t.caseSensitive,l=h===void 0?!1:h,R=t.className,H=t.findChunks,P=t.highlightClassName,w=P===void 0?"":P,A=t.highlightStyle,W=A===void 0?{}:A,q=t.highlightTag,V=q===void 0?"mark":q,_=t.sanitize,s=t.searchWords,p=t.textToHighlight,S=t.unhighlightTag,k=S===void 0?"span":S,O=t.unhighlightClassName,ne=O===void 0?"":O,ie=t.unhighlightStyle,le=c(t,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),oe=(0,u.findAll)({autoEscape:b,caseSensitive:l,findChunks:H,sanitize:_,searchWords:s,textToHighlight:p}),U=V,G=-1,X="",Y=void 0,ce=function(F){var D={};for(var M in F)D[M.toLowerCase()]=F[M];return D},ue=(0,j.default)(ce);return(0,C.createElement)("span",n({className:R},le,{children:oe.map(function($,F){var D=p.substr($.start,$.end-$.start);if($.highlight){G++;var M=void 0;typeof w=="object"?l?M=w[D]:(w=ue(w),M=w[D.toLowerCase()]):M=w;var Z=G===+v;X=M+" "+(Z?r:""),Y=Z===!0&&i!=null?Object.assign({},W,i):W;var ee={children:D,className:X,key:F,style:Y};return typeof U!="string"&&(ee.highlightIndex=G),(0,C.createElement)(U,ee)}else return(0,C.createElement)(k,{children:D,className:ne,key:F,style:ie})})}))}x.exports=m.default},function(x,m){x.exports=function(g){var n={};function d(c){if(n[c])return n[c].exports;var u=n[c]={exports:{},id:c,loaded:!1};return g[c].call(u.exports,u,u.exports,d),u.loaded=!0,u.exports}return d.m=g,d.c=n,d.p="",d(0)}([function(g,n,d){g.exports=d(1)},function(g,n,d){Object.defineProperty(n,"__esModule",{value:!0});var c=d(2);Object.defineProperty(n,"combineChunks",{enumerable:!0,get:function(){return c.combineChunks}}),Object.defineProperty(n,"fillInChunks",{enumerable:!0,get:function(){return c.fillInChunks}}),Object.defineProperty(n,"findAll",{enumerable:!0,get:function(){return c.findAll}}),Object.defineProperty(n,"findChunks",{enumerable:!0,get:function(){return c.findChunks}})},function(g,n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAll=function(f){var t=f.autoEscape,o=f.caseSensitive,r=o===void 0?!1:o,a=f.findChunks,v=a===void 0?c:a,i=f.sanitize,b=f.searchWords,h=f.textToHighlight;return u({chunksToHighlight:d({chunks:v({autoEscape:t,caseSensitive:r,sanitize:i,searchWords:b,textToHighlight:h})}),totalLength:h?h.length:0})};var d=n.combineChunks=function(f){var t=f.chunks;return t=t.sort(function(o,r){return o.start-r.start}).reduce(function(o,r){if(o.length===0)return[r];var a=o.pop();if(r.start<=a.end){var v=Math.max(a.end,r.end);o.push({start:a.start,end:v})}else o.push(a,r);return o},[]),t},c=function(f){var t=f.autoEscape,o=f.caseSensitive,r=f.sanitize,a=r===void 0?C:r,v=f.searchWords,i=f.textToHighlight;return i=a(i),v.filter(function(b){return b}).reduce(function(b,h){h=a(h),t&&(h=y(h));for(var l=new RegExp(h,o?"g":"gi"),R=void 0;R=l.exec(i);){var H=R.index,P=l.lastIndex;P>H&&b.push({start:H,end:P}),R.index==l.lastIndex&&l.lastIndex++}return b},[])};n.findChunks=c;var u=n.fillInChunks=function(f){var t=f.chunksToHighlight,o=f.totalLength,r=[],a=function(b,h,l){h-b>0&&r.push({start:b,end:h,highlight:l})};if(t.length===0)a(0,o,!1);else{var v=0;t.forEach(function(i){a(v,i.start,!1),a(i.start,i.end,!0),v=i.end}),a(v,o,!1)}return r};function C(j){return j}function y(j){return j.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(x,m){x.exports=de()},function(x,m){var g=function(c,u){return c===u};function n(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,u=void 0,C=[],y=void 0,j=!1,f=function(r,a){return c(r,C[a])},t=function(){for(var r=arguments.length,a=Array(r),v=0;v<r;v++)a[v]=arguments[v];return j&&u===this&&a.length===C.length&&a.every(f)||(j=!0,u=this,C=a,y=d.apply(this,a)),y};return t}x.exports=n}])}(Q)),Q.exports}var ye=be();const te=he(ye),ae={id:null,name:null,permissions:[]};function Ne({selectNumbers:N,handleDisplayChange:x,total:m}){return e.jsxs("div",{className:"w-fit p-1 flex items-center rounded-lg bg-blue-700 text-white gap-x-2",children:["Display",e.jsxs("select",{value:N,onChange:x,className:"text-blue-600 w-fit",name:"",id:"",children:[e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:m,children:"All"})]}),"records per page "]})}function re({height:N="16",width:x="16",fillColor:m="currentColor"}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:x,height:N,fill:m,className:"bi bi-plus-lg",viewBox:"0 0 16 16",children:e.jsx("path",{fillRule:"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})})}function Fe({roles:N,permissions:x}){const m=N.per_page||10,[g,n]=E.useState(!1),[d,c]=E.useState(!1),[u,C]=E.useState(null),[y,j]=E.useState([]),[f,t]=E.useState(m),[o,r]=E.useState(!1),[a,v]=E.useState(!1),i=I("createRoleForm",ae),b=I(),h=I(" ",{name:null}),l=I(ae),R=I();E.useEffect(()=>{j(N.data)},[N]);const H=s=>{s.preventDefault(),i.post(route("roles.store"),{preserveScroll:!0,onSuccess:()=>{i.reset(),n(!1),r(!1)},onError:()=>{n(!0)}}),r(!1)},P=s=>{r(!0),s.preventDefault(),h.post(route("permissions.store"),{preserveScroll:!0,onSuccess:()=>{h.reset(),c(!1)},onError:p=>{c(!0),console.error("Validation Errors:",p)}}),r(!1)},w=s=>{C(s),s!==null&&ge.get(route("roles.index"),{search:s,perpage:m},{preserveState:!0})},A=s=>{const p=Number(s.target.value);t(p),b.get(route("roles.index",{perpage:p}))},W=s=>{const p=y.find(S=>S.id==s);l.setData("id",s),l.setData("name",p.name),l.setData("permissions",[...p.permissions.map(S=>S.name)]),v(!0)},q=s=>{r(!0),R.delete(route("roles.destroy",{id:s}),{preserveScroll:!0,onSuccess:()=>{r(!1)},onError:()=>{r(!1)}})},V=s=>{s.preventDefault(),console.log(l.data),l.put(route("roles.update",{id:l.data.id}),{preserveScroll:!0,onSuccess:()=>{l.reset(),v(!1)},onError:p=>{v(!0),console.error("Validation Errors:",p)}})},_=()=>{v(!1)};return e.jsxs(fe,{title:"Role",heading:"Roles",loading:o,searchFunction:w,serachBoxPlaceHolder:"Search by role or permiission name",children:[e.jsx(K,{show:g,onClose:()=>n(!1),maxWidth:"lg",className:"dark:text-white",children:e.jsx("div",{className:"p-5 dark:text-white",children:e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"w-4/5 p-5 flex flex-col items-center justify-center mx-auto",children:[e.jsxs("div",{className:"mb-6 w-full",children:[e.jsx(z,{value:"Enter Role Name"}),e.jsx(J,{name:"name",className:"w-full",value:i.data.name,onChange:s=>i.setData("name",s.target.value)}),i.errors.name&&e.jsx(L,{message:i.errors.name})]}),e.jsxs("div",{className:"mb-6 w-full",children:[e.jsx(z,{value:"Assign Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:x.map((s,p)=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",value:s,checked:i.data.permissions.includes(s),onChange:S=>{const k=i.data.permissions.includes(s)?i.data.permissions.filter(O=>O!==s):[...i.data.permissions,s];i.setData("permissions",k)}}),e.jsx("span",{className:"text-gray-700 dark:text-gray-400",children:s})]},p))}),i.errors.permissions&&e.jsx(L,{message:i.errors.permissions})]})]}),e.jsxs("div",{className:"w-full p-5 flex items-center gap-x-2 justify-end",children:[e.jsx(T,{onClick:s=>{s.preventDefault(),n(!1)},btnType:"secondary",disabled:i.processing,children:"Close"}),e.jsx(T,{disabled:i.processing,type:"submit",btnType:"success",children:i.processing?"Creating Role ...":"Create Role"})]})]})})}),e.jsx(K,{show:d,onClose:()=>c(!1),maxWidth:"sm",children:e.jsx("div",{className:"p-5",children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"mb-6 w-full",children:[e.jsx(z,{value:"Enter Permission Name"}),e.jsx(J,{name:"name",className:"w-full",value:h.data.name,onChange:s=>h.setData("name",s.target.value)}),h.errors.name&&e.jsx(L,{message:h.errors.name})]}),e.jsxs("div",{className:"w-full  flex items-center gap-x-2 justify-center",children:[e.jsx(T,{disabled:i.processing,btnType:"secondary",onClick:s=>{s.preventDefault(),c(!1)},children:"Close"}),e.jsx(T,{disabled:h.processing,type:"submit",btnType:"success",children:h.processing?"Creating Permission ...":"Create Permission"})]})]})})}),e.jsx(K,{show:a,onClose:_,children:e.jsx("div",{className:"p-5 dark:text-white",children:e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"w-4/5 p-5 flex flex-col items-center justify-center mx-auto",children:[e.jsxs("div",{className:"mb-6 w-full",children:[e.jsx(z,{value:"Enter Role Name"}),e.jsx(J,{name:"name",className:"w-full",value:l.data.name,onChange:s=>l.setData("name",s.target.value)}),l.errors.name&&e.jsx(L,{message:l.errors.name})]}),e.jsxs("div",{className:"mb-6 w-full",children:[e.jsx(z,{value:"Assign Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:x.map((s,p)=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",value:s,checked:l.data.permissions.includes(s),onChange:S=>{const k=l.data.permissions.includes(s)?l.data.permissions.filter(O=>O!==s):[...l.data.permissions,s];l.setData("permissions",k)}}),e.jsx("span",{className:"text-gray-700 dark:text-gray-400",children:s})]},p))}),l.errors.permissions&&e.jsx(L,{message:l.errors.permissions})]})]}),e.jsxs("div",{className:"w-full p-5 flex items-center gap-x-2 justify-end",children:[e.jsx(T,{onClick:s=>{s.preventDefault(),_()},btnType:"secondary",disabled:l.processing,children:"Close"}),e.jsx(T,{disabled:l.processing,type:"submit",btnType:"success",children:l.processing?"Creating Role ...":"Create Role"})]})]})})}),e.jsxs("section",{className:"text-gray-600 dark:text-white body-font py-2 w-full",children:[e.jsxs("div",{className:"w-full flex items-center justify-between mb-5",children:[e.jsx(Ne,{handleDisplayChange:A,selectNumbers:f,total:N.total}),e.jsxs("div",{className:"flex items-center w-fit justify-end gap-x-2 mb-5",children:[e.jsxs(T,{onClick:()=>n(!0),btnType:"primary",children:[e.jsx(re,{})," Role"]}),e.jsxs(T,{onClick:()=>c(!0),btnType:"primary",disabled:h.processing,children:[e.jsx(re,{})," Permission"]})]})]}),e.jsx(pe,{columns:["#","Name","Permissions","Action"],children:y.length==0?e.jsxs("div",{className:"text-red-500  font-bold w-full  my-5",children:["No Role found on ",u," "]}):y.map((s,p)=>{var S;return e.jsxs(xe,{isLast:p==y.length-1,children:[e.jsx(B,{children:p+1}),e.jsx(B,{children:e.jsx(te,{highlightClassName:"highlight",searchWords:[u],autoEscape:!1,textToHighlight:s.name})}),e.jsx(B,{children:e.jsx(te,{highlightClassName:"highlight",searchWords:[u],autoEscape:!1,textToHighlight:((S=s.permissions)==null?void 0:S.map(k=>k.name).join(", "))||"No Permissions"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(ve,{onClick:()=>W(s.id)}),e.jsx(je,{onClick:()=>q(s.id)})]})})]},s.id||p)})}),e.jsx("nav",{"aria-label":"Pagination",className:"mt-10 flex",children:e.jsx("ul",{className:"inline-flex -space-x-px text-sm mx-auto",children:N.links.map((s,p)=>e.jsx("li",{children:e.jsx(me,{href:s.url?`${s.url}${s.url.includes("?")?"&":"?"}perpage=${m}`:"#",className:`flex items-center justify-center px-3 h-8 border ${s.active?"text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:bg-gray-700 dark:text-white":"text-gray-500 bg-white hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"} ${s.url?"":"cursor-not-allowed opacity-50"}`,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})})},p))})})]})]})}export{Fe as default};
