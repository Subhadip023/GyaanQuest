import{K as x,a as p,m as g,j as e}from"./app-a17V35Ex.js";import{I as h}from"./InputLabel-DUvnhS6U.js";import{M as u}from"./Modal-hEi01PnJ.js";import{B as f}from"./Button-Cyp5wEiH.js";import{A as y}from"./AdminLayout-CAvGt-wk.js";import"./transition-HQgnNRUc.js";import"./index-Dca8f_Q-.js";import"./Loader-fKDPiDcW.js";import"./SideBarLink-DHPaqsYh.js";import"./CollabsableDiv-xu1Z0SUw.js";import"./CollabsableLinks-C6wOpsms.js";function I({users:o=[],roles:n=[]}){const{auth:d}=x().props,[i,r]=p.useState(!1),s=g({userId:null,name:[]}),c=t=>{s.setData("userId",t.id);const a=o.find(l=>l==t);s.setData("name",a.roles.map(l=>l.name)),console.log(a.roles.map(l=>l.name)),r(!0)},m=t=>{t.preventDefault(),console.log(s),s.post(route("assign-role"),{preserveScroll:!0,onSuccess:()=>{s.reset(),r(!1)},onError:a=>{console.log(a),r(!0)}})};return e.jsxs(y,{title:"Users",heading:"Users",children:[e.jsx(u,{show:i,onClose:()=>r(!1),maxWidth:"lg",children:e.jsx("div",{className:"p-5 w-full ",children:e.jsxs("form",{onSubmit:m,children:[e.jsx(h,{className:"text-xl w-full dark:text-white",children:"Select Role"}),e.jsxs("div",{className:"w-full flex flex-wrap gap-x-2 gap-y-1",children:[e.jsxs("div",{className:"grid grid-cols-3  h-[70vh] scrollbar overflow-y-auto ",children:[" ",n.filter(t=>d.role.includes("admin")||t!=="admin").map(t=>e.jsxs("div",{className:"px-5 py-2 text-green-600 flex gap-1 items-center",children:[e.jsx("input",{type:"checkbox",value:t,onChange:a=>{s.setData("name",a.target.checked?[...s.data.name,t]:s.data.name.filter(l=>l!==t))},checked:s.data.name.includes(t)}),t]},t))]}),e.jsxs("div",{className:"w-full p-5 flex items-center gap-x-2 justify-end",children:[e.jsx(f,{onClick:t=>{t.preventDefault(),r(!1)},btnType:"secondary",disabled:s.processing,children:"Close"}),e.jsx("button",{disabled:s.processing,type:"submit",className:`px-5 py-2 flex items-center gap-x-2 text-white rounded-lg 
                                ${s.processing?"opacity-50 cursor-not-allowed":"hover:bg-blue-500"} 
                                bg-blue-700 duration-200`,children:s.processing?"Add Role ...":"Add Role"})]})]}),"                        "]})})}),e.jsx("div",{className:"lg:w-2/3 w-full mx-auto overflow-auto",children:e.jsxs("table",{className:"table-auto w-full text-left whitespace-no-wrap",children:[e.jsx("thead",{className:"border-b-2 border-gray-500 dark:border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium text-gray-900 dark:text-gray-50 text-lg",children:"#"}),e.jsx("th",{className:"px-4 py-3 font-medium text-gray-900 dark:text-gray-50 text-lg",children:"Name"}),e.jsx("th",{className:"px-4 py-3 font-medium text-gray-900 dark:text-gray-50 text-lg",children:"Assign Role"}),e.jsx("th",{className:"px-4 py-3 font-medium text-gray-900 dark:text-gray-50 text-lg",children:"Action"})]})}),e.jsx("tbody",{children:o.length==0?e.jsx("div",{className:"text-red-500  font-bold w-full  my-5",children:"No Role Present "}):o.map((t,a)=>e.jsxs("tr",{className:`${a==o.length-1?"":"border-b-2 border-gray-300"}`,children:[e.jsx("td",{className:"px-4 py-3 dark:text-gray-100",children:a+1}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"px-4 py-3 dark:text-gray-100",children:t.roles.length===0?"No role Assigne":t.roles.map(l=>l.name).join(", ")}),e.jsxs("td",{className:"px-4 py-3 dark:text-gray-100",children:["edit delete ",e.jsx("button",{className:"",onClick:()=>c(t),children:" Assign Roles"})]})]},t.id||a))})]})})]})}export{I as default};
